
volatile

作用

如果一个字段被声明成volatile，
Java线程内存模型确保所有线程看到这个变量的值是一致的。



volatile是如何来保证可见性

有volatile变量修饰的共享变量进行写操作的时候会多出第二行汇编代码，
，Lock前缀的指令在多核处理器下会引发了两件事情[1]。
1）将当前处理器缓存行的数据写回到系统内存。
2）这个写回内存的操作会使在其他CPU里缓存了该内存地址的数据

优化

volatile的使用优化
著名的Java并发编程大师Doug lea在JDK 7的并发包里新增一个队列集合类LinkedTransferQueue，
它在使用volatile变量时，用一种追加字节的方式来优化队列出队和入队的性
能。

